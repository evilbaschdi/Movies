<controls:MetroWindow x:Class="Movie.MainWindow"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                      Title="Movies" Width="1000" Height="700" Icon="b.ico"
                      EnableDWMDropShadow="True"
                      GlowBrush="{DynamicResource AccentColorBrush}">

    <controls:MetroWindow.RightWindowCommands>
        <controls:WindowCommands>
            <!--Search-->
            <TextBox Name="SearchFilter" Height="20" TextWrapping="Wrap" TextChanged="SearchOnTextChanged" Width="300" controls:TextBoxHelper.ClearTextButton="True" controls:TextBoxHelper.Watermark="enter search term" />
            <ComboBox Name="SearchCategory" Width="100" Height="20" DropDownClosed="SearchCategoryOnDropDownClosed">
                <ComboBoxItem Content="Name" />
                <ComboBoxItem Content="Year" />
                <ComboBoxItem Content="Format" />
                <ComboBoxItem Content="Distributed" />
            </ComboBox>

            <!--Button-->
            <Button Name="New" Click="NewClick" Content="Add new movie" />
            <Button Content="Settings" Click="SettingsClick" />
        </controls:WindowCommands>
    </controls:MetroWindow.RightWindowCommands>

    <Grid>
        <!--DataGrid-->
        <!-- ReSharper disable MemberCanBePrivate.Global -->
        <DataGrid Name="MovieGrid" IsReadOnly="True" CanUserAddRows="False" SelectionUnit="FullRow" ColumnWidth="*" AutoGenerateColumns="False"
                  GridLinesVisibility="Horizontal" MouseDoubleClick="MovieGridOnMouseDoubleClick" SelectionChanged="MovieGridSelectionChanged" CanUserDeleteRows="False" Margin="10,10,10,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" CanUserResize="False" />
                <DataGridTextColumn Header="Year" Binding="{Binding Year}" Width="100" CanUserResize="False" />
                <DataGridTextColumn Header="Format" Binding="{Binding Format}" Width="100" CanUserResize="False" />
                <DataGridCheckBoxColumn Header="Distributed" Binding="{Binding Distributed}" Width="100" CanUserResize="False"
                                        ElementStyle="{DynamicResource MetroDataGridCheckBox}"
                                        EditingElementStyle="{DynamicResource MetroDataGridCheckBox}" />
            </DataGrid.Columns>
            <DataGrid.ContextMenu>
                <ContextMenu Name="MovieContextMenu" StaysOpen="True">
                    <MenuItem Name="EditMenuItem" Header="Edit" Click="EditClick" />
                    <MenuItem Name="DeleteMenuItem" Header="Delete" Click="DeleteClick" />
                    <MenuItem Name="DistributeMenuItem" Header="Distribute that movie" Click="DistributeClick" IsEnabled="True" />
                    <MenuItem Name="GotBackMenuItem" Header="Got back" Click="GotBackClick" />
                </ContextMenu>
            </DataGrid.ContextMenu>

            <DataGrid.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander IsExpanded="True">
                                            <Expander.Header>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Path=ItemCount}" />
                                                    <TextBlock Text=" " />
                                                    <TextBlock Text="{Binding Path=Name}" />
                                                    <TextBlock Text="s" />
                                                </StackPanel>
                                            </Expander.Header>
                                            <ItemsPresenter />
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </DataGrid.GroupStyle>
        </DataGrid>
    </Grid>
</controls:MetroWindow>